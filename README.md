# Проектирование базы данных 'My report'
psql (14.5) ubuntu 22.04

### Бизнес задачи

* Реализовать систему учёта трудо затрат программиста.
* Предоставлять отчёт с затраченными часами, стоимостью работ и ссылкой на саму задачу во внешнем сервисе.
* Формирование сводного отчёта, выставление счёта и акта выполненных работ для заказчика.
* Вебприложение должно быть лаконичным и функциональным (вдохнавляйтесь toggle).

### Документация к БД

База данных имеет 5 сущностей
1. Tasks - основная таблица где будет тысячи записей, хранить выполняемые задачи.
2. Clients - таблица клиентов.
3. Type_сlients - таблица тип клиента, Тоесть это компания или ИП.
4. Requisites - таблица реквизитов клиента взависимости кем он является ИП или компанией.
5. Projects - таблица проектов клиента, хранит ставку или общую стоимость сделки, и содержит ссылку на задачи во внешнем источнике.

#### Tasks - детальное описание полей
| Name       |   Type    |                            Comment |
|------------|:---------:|-----------------------------------:|
| id         | integer   |                     Первичный ключ |
| start      | timestamp |     Время начала выполнения задачи |
| stop       | timestamp | Время завершения выполнения задачи |
| is_payment |  boolean  |      Является ли задача оплаченной |
| clients_id |  integer  |           Внешний ключ. ID клиента |
| project_id |  integer  |           Внешний ключ. ID проекта |



#### Clients - детальное описание полей
| Name            |    Type     |                                        Comment |
|-----------------|:-----------:|-----------------------------------------------:|
| id              |  integer    |                                 Первичный ключ |
| name            | varchar(45) |                                    Имя клиента |
| last_name       | varchar(45) |                                Фамилия клиента |
| phone           | varchar(10) |                                 Номер телефона |
| email           | varchar(25) |                                      Эл. почта |
| type_clients_id |   integer   | Внешний ключ. ID тип клиента (ИП или компания) |
| requisites_id   |   integer   |             Внешний ключ. ID записи реквизитов |
| projects_id     |   integer   |                       Внешний ключ. ID проекта |


#### Type_сlients - детальное описание полей
| Name       |    Type     |                     Comment |
|------------|:-----------:|----------------------------:|
| id         |   integer   |              Первичный ключ |
| name       | varchar(10) | Тип клиента компания или ИП |

#### Requisites - детальное описание полей
| Name             |     Type     |                      Comment |
|------------------|:------------:|-----------------------------:|
| id               |    integer   |               Первичный ключ |
| name             | varchar(50)  | Название компании или ФИО ИП |
| inn              | varchar(10)  |          ИНН компании или ИП |
| ogrn             | varchar(15)  |  ОГРН компании или ОГРНИП ИП |
| address          | varchar(200) |       Адресс компании или ИП |
| bank             | varchar(45)  |         Банк компании или ИП |
| checking_account | varchar(20)  |          Р/С компании или ИП |
| cor_account      | varchar(20)  |          К/С компании или ИП |
| bik              | varchar(10)  |   БИК банка компании или ИП  |

#### Projects - детальное описание полей
| Name         |     Type     |                                                                                         Comment |
|--------------|:------------:|------------------------------------------------------------------------------------------------:|
| id           |   integer    |                                                                                  Первичный ключ |
| name         | varchar(100) |                                                                                Название проекта |
| rate         |    money     |                                                Ставка или стоимость проекта (если is_deal true) |
| is_deal      |   boolean    |                                                          Оценка работа по часовая или проектная |
| link_kanban  | varchar(45)  | Ссылка на внешний канбан (кайтен, трелло и тд), нужно для формирования ссылок на карточки задач |

### Схема БД

![public](https://user-images.githubusercontent.com/50550746/205484770-4141d5b0-d82d-48cd-a5a1-8eb15e9fcc63.png)